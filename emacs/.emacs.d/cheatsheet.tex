\documentclass[10pt]{article}
\usepackage[margin=0.5cm,landscape,a3paper]{geometry}
\pagestyle{empty}

\usepackage{textcomp}
\usepackage{multicol}
\usepackage{menukeys}
\usepackage{enumitem}
\usepackage{CJKutf8}
\usepackage{xcolor}
\usepackage{xpatch}
\usepackage{xparse}
\usepackage{calc}
\usepackage{tcolorbox}

\definecolor{default}{HTML}{333333}
\definecolor{heading}{HTML}{000000}
\definecolor{command}{HTML}{666666}
\definecolor{key}{HTML}{268BD2}

\renewcommand\section[1]{\bigskip\par\textbf{\color{heading}\large#1}\smallskip}
\renewcommand\subsection[1]{\smallskip\par\textbf{\color{heading}#1}}
\newcommand\humanreadable[1]{{\par\color{default}\small\sffamily#1}}
\newcommand\meta[1]{\textlangle\textit{#1}\textrangle}
\newcommand\keyify[1]{\color{key}\ttfamily#1}
\newlist{keylist}{description}{1}
\setlist[keylist]{
  topsep      = 1pt,
  labelindent = 1pt,
  itemsep     = -1ex,
  labelwidth  = \widthof{xxxxxxxxxxxxxx},
  font        = \keyify,
  leftmargin  = !,
  before      = \color{command}\sffamily
}

\setlength\parindent{0em}
\setlength\parsep{0ex}
\renewcommand\baselinestretch{1.2}

\begin{document}
\begin{CJK}{UTF8}{gbsn}
\begin{multicols}{3}

  \setlength{\columnsep}{1cm}
  \begin{center}
    \LARGE\color{heading}\textbf{Emacs Cheat Sheet}
  \end{center}

  \section{获取帮助}
  \begin{keylist}
  \item[C-h k \meta{key}] \humanreadable{describe function bound to \meta{key}}
  \item[C-h b] \humanreadable{list key-bindings for focused buffer}
  \item[C-h m] \humanreadable{describe mode}
  \item[C-h l] \humanreadable{show the keys you have pressed}
  \item[C-h f] \humanreadable{describe function}
  \item[C-h b] embark-bindings
  \item[C-h B] embark-bindings-at-point
  \item[C-h C-f] find-function
  \item[C-h C-k] find-function-on-key
  \item[C-h C-l] find-library
  \item[C-h C-i] info-display-manual
  \end{keylist}

  \section{全局按键}
  \begin{keylist}
  \item[jk] evil-emacs-state
  \item[C-;] eshell
  \item[C-'] vterm
  \item[s-o] crux-open-with
  \item[s-;] flyspell-correct-wrapper
  \item[s-'] flyspell-correct-next
  \item[C-.] embark-act
  \item[C-,] embark-dwim
  \item[j k] evil-emacs-state
  \item[C-x C-0] text-scale-adjust
  \item[C-<backspace>] \humanreadable{kill backeard a word}
  \item[M-/] hippie-expand
  \item[C-x g] magit-status
  \item[C-x M-g] magit-dispatch
  \item[C-c g] consult-ripgrep
  \end{keylist}

  \subsection{窗口管理}
  \begin{keylist}
  \item[s-,] winner-undo
  \item[s-.] winner-redo
  \item[SPC-1] windows-select-1
  \item[SPC w0] delete-window
  \item[SPC w0] delete-window
  \item[SPC w1] delete-other-windows
  \item[SPC w2] split-window-vertically
  \item[SPC w3] split-window-horizontally
  \end{keylist}

  \subsection{文件管理}
  \begin{keylist}
  \item[ff] find-file
  \item[SPC f f] find-file
  \item[C-x C-f] find-file
  \item[SPC f t] find-file-other-tab
  \item[SPC f o] find-file-other-window
  \item[SPC f r] rename-visited-file
  \item[SPC f F] crux-sudo-edit
  \item[SPC f E] crux-reopen-as-root
  \item[SPC f k] kill-current-buffer
  \item[SPC f K] crux-kill-other-buffers
  \item[SPC f D] crux-delete-file-and-buffer
  \item[s-r] consult-recentf-file
  \end{keylist}

  \subsection{目录管理}
  \begin{keylist}
  \item[ff] find-file
  \item[C-x C-j] dired-jump
  \item[C-x C-b] ibuffer
  \end{keylist}

  \subsection{文本编辑}
  \begin{keylist}
  \item[C-/] undo
  \item[C-?] redo
  \item[C-x k] kill-buffer-and-window
  \item[M-;] evil-commentary-line
  \item[M-i] consult-imenu-multi
  \item[M-w] easy-kill
  \item[C-M-SPC] easy-mark
  \item[C-M-@] easy-mark
  \end{keylist}

  \subsection{移动跳转}
  \begin{keylist}
  \item[jj] avy-goto-word-1
  \item[SPC j;] evil-goto-last-change
  \item[SPC jj] evil-avy-goto-char-timer
  \item[SPC jw] evil-avy-goto-word-or-subword-1
  \item[SPC jl] consult-line
  \item[SPC jL] consult-line-multi
  \item[SPC ji] consult-imenu
  \item[SPC jo] consult-outline
  \item[SPC jm] consult-mark
  \item[SPC jM] consult-global-mark
  \item[M-z] zop-up-to-char
  \item[M-Z] zop-to-char
  \end{keylist}

  \subsection{搜索查找}
  \begin{keylist}
  \item[C-c g] consult-ripgrep
  \item[C-c f] consult-find
  \item[gh] consult-ripgrep
  \item[hh] color-rg-search-symbol
  \item[SPC sg] color-rg-search-symbol
  \item[SPC sh] color-rg-search-input
  \item[SPC sj] color-rg-search-symbol-in-project
  \item[SPC sk] color-rg-search-input-in-project
  \item[SPC s,] color-rg-search-symbol-in-current-file
  \item[SPC s.] color-rg-search-input-in-current-file
  \end{keylist}

  \subsection{寄存器/书签}
  \begin{keylist}
  \item[SPC rj] jump-to-register
  \item[SPC ri] insert-register
  \item[SPC rS] copy-to-register
  \item[SPC rs] consult-register-store
  \item[SPC rl] consult-register-load
  \item[SPC rr] consult-register
  \item[SPC rr] consult-bookmark
  \end{keylist}

  \section{编程}
  \begin{keylist}
  \item[SPC de] eldoc
  \item[SPC dd] devdocs-lookup
  \item[SPC gf] consult-flymake
  \item[SPC gv] eldoc
  \item[SPC gs] consult-eglot-symbols
  \item[SPC gd] xref-find-definitions
  \item[SPC gr] xref-find-references
  \item[SPC go] xref-find-definitions-other-window
  \item[SPC ef] eglot-format
  \item[SPC er] eglot-rename

  \item[SPC eh] eglot-help-at-point
  \item[SPC ea] eglot-code-actions
  \item[SPC en] flymake-goto-next-error
  \item[SPC ep] flymake-goto-prev-error
  \item[SPC eb] flymake-show-buffer-diagnostics
  \item[SPC hh] symbol-overlay-put
  \item[SPC hc] symbol-overlay-remove-all
  \end{keylist}

  \subsection{magit}
  \begin{keylist}
  \item[SPC vs] magit-status
  \item[SPC vb] magit-blame
  \item[SPC vd] magit-diff-buffer-file
  \item[SPC vv] magit-dispatch
  \item[SPC vfc] magit-file-checkout
  \item[SPC vfd] magit-file-delete
  \item[SPC vfr] magit-file-rename
  \item[SPC vfs] magit-stage-file
  \item[SPC vfu] magit-unstage-file
  \end{keylist}

  \subsection{project}
  \begin{keylist}
  \item[SPC pp] project-switch-project
  \item[SPC pb] project-switch-to-buffer
  \item[SPC pd] project-find-dir
  \item[SPC pf] project-find-file
  \item[SPC p!] project-shell-command
  \item[SPC p\&] project-async-shell-command
  \item[SPC pe] project-eshell
  \item[SPC pr] project-query-replace-regexp
  \item[SPC pg] project-find-regexp
  \item[SPC px] project-execute-extended-command
  \end{keylist}

  \subsection{emacs-lisp}
  \begin{keylist}
  \item[C-c C-c] eval-defun
  \item[C-c C-b] eval-buffer
  \end{keylist}

  \subsection{org}
  \begin{keylist}
  \item[C-c l] org-store-link
  \item[C-c a] org-agenda
  \item[C-c b] org-iswitchb
  \item[C-c c] org-capture
  \item[C-c t] org-show-todo-tree
  \end{keylist}

\end{multicols}
\end{CJK}
\end{document}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:
